# 教师端"我的申请"功能开发文档

## 功能概述
为教师端新增独立的"我的申请"菜单，将原本在"申请开课"页面中的标签页功能独立出来，提供更好的用户体验。

## 主要特性

### 1. 功能分离
- **申请开课页面** (`CourseApplication.vue`)：专注于浏览课程模板和提交新申请
- **我的申请页面** (`MyApplications.vue`)：专注于管理已提交的申请

### 2. 我的申请页面功能
- **申请列表展示**：显示教师的所有开课申请
- **状态筛选**：支持按申请状态（待审核、已通过、已拒绝）筛选
- **多维度搜索**：支持按学年、课程名称搜索
- **申请管理**：
  - 查看申请详情
  - 编辑待审核的申请
  - 删除待审核的申请
  - 直接跳转到课程表管理（已通过的申请）

### 3. 申请开课页面优化
- **简化界面**：移除"我的申请"标签页，专注于申请功能
- **增强搜索**：支持按学年、学期筛选课程模板
- **快速跳转**：提供"查看我的申请"按钮
- **优化表单**：允许教师调整课程学时和计划人数

## 技术实现

### 前端文件结构
```
frontend/src/views/teacher/
├── CourseApplication.vue     # 申请开课页面（已优化）
├── MyApplications.vue        # 我的申请页面（新增）
└── ScheduleManagement.vue    # 课程表管理页面
```

### 路由配置
```javascript
// frontend/src/router/index.js
{
  path: '/course/my-applications',
  name: 'MyApplications',
  component: MyApplications,
  meta: {
    title: '我的申请'
  }
}
```

### 数据库菜单配置
```sql
-- database/my_applications_menu.sql
INSERT INTO `sys_menu` (`menu_name`, `menu_code`, `parent_id`, `menu_type`, `path`, `component`, `icon`, `sort`, `status`, `description`) 
SELECT '我的申请', 'my-applications', id, 'MENU', '/course/my-applications', '/course/my-applications', 'Document', 40, 1, '教师开课申请管理'
FROM `sys_menu` WHERE `menu_code` = 'course' AND `menu_type` = 'MENU';
```

## 页面功能详解

### 我的申请页面 (MyApplications.vue)

#### 核心功能
1. **申请列表展示**
   - 课程名称（含申请理由预览）
   - 学年学期信息
   - 课程学时和计划人数
   - 申请状态（带颜色标识）
   - 申请时间和审核时间

2. **筛选和搜索**
   - 按状态筛选：全部、待审核、通过、拒绝
   - 按学年筛选：2024-2025、2023-2024
   - 按课程名称搜索

3. **申请操作**
   - **查看详情**：展示完整的申请信息和审核意见
   - **编辑申请**：仅限待审核状态的申请
   - **删除申请**：仅限待审核状态的申请
   - **安排课表**：已通过的申请可直接跳转到课程表管理

#### 状态管理
- `0` - 待审核（warning 样式）
- `1` - 已通过（success 样式）
- `2` - 已拒绝（danger 样式）

#### 响应式设计
- 支持移动端适配
- 表格列宽自适应
- 搜索表单响应式布局

### 申请开课页面 (CourseApplication.vue)

#### 优化内容
1. **界面简化**
   - 移除标签页设计
   - 添加"查看我的申请"快捷按钮
   - 使用卡片布局统一风格

2. **搜索增强**
   - 支持按课程名称搜索
   - 支持按学年筛选
   - 支持按学期筛选

3. **申请表单优化**
   - 允许调整课程学时（显示默认值）
   - 允许调整计划人数（显示默认值）
   - 增强申请理由输入（字数限制和统计）

4. **用户体验提升**
   - 提交成功后自动跳转到"我的申请"页面
   - 表单验证优化
   - 加载状态显示

## API 接口

### 使用的现有接口
- `GET /api/course-applications` - 获取申请列表
- `POST /api/course-applications` - 创建新申请
- `PUT /api/course-applications/{id}` - 更新申请
- `DELETE /api/course-applications/{id}` - 删除申请
- `GET /api/course-templates/enabled` - 获取可用课程模板

### 请求参数说明
```javascript
// 获取申请列表
{
  page: 1,
  size: 10,
  status: '0|1|2',  // 可选
  academicYear: '2024-2025',  // 可选
  keyword: '课程名称'  // 可选
}

// 创建申请
{
  templateId: 1,
  courseHours: 32,
  maxStudents: 50,
  reason: '申请理由'
}
```

## 菜单权限配置

### 数据库配置脚本
执行 `database/my_applications_menu.sql` 脚本：
1. 创建"我的申请"菜单项
2. 为教师角色分配菜单权限
3. 设置合适的排序和图标

### 菜单层级结构
```
课程管理
├── 申请开课 (sort: 30)
├── 我的申请 (sort: 40)  ← 新增
└── 课程表管理 (sort: 50)
```

## 安装和配置

### 1. 前端配置
```bash
# 文件已创建，无需额外安装
# 路由已配置，重启前端服务即可
npm run serve
```

### 2. 数据库配置
```sql
-- 执行菜单配置脚本
source database/my_applications_menu.sql
```

### 3. 验证功能
1. 以教师身份登录系统
2. 在左侧菜单中找到"我的申请"
3. 验证页面功能：
   - 申请列表展示
   - 筛选和搜索功能
   - 申请操作（查看、编辑、删除）
   - 与课程表管理的联动

## 与现有功能的集成

### 与课程表管理的联动
- 已通过的申请在"我的申请"页面显示"安排课表"按钮
- 点击后直接跳转到课程表管理页面
- 保持数据的一致性和流程的连贯性

### 与申请开课的联动
- 申请开课页面提供"查看我的申请"快捷入口
- 提交申请后自动跳转到"我的申请"页面
- 统一的用户体验和操作流程

## 注意事项

1. **权限控制**：教师只能查看和操作自己的申请
2. **状态限制**：只有待审核状态的申请可以编辑和删除
3. **数据一致性**：确保申请数据与课程表数据的同步
4. **用户体验**：提供清晰的状态提示和操作反馈

## 后续扩展建议

1. **消息通知**：申请状态变更时发送消息通知
2. **批量操作**：支持批量删除待审核申请
3. **导出功能**：支持导出申请列表为Excel
4. **历史记录**：记录申请的修改历史
5. **快速复制**：支持基于已有申请快速创建新申请 