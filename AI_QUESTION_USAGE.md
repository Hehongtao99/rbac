# AI智能题目提取功能使用说明

## 功能概述

本系统集成了AI智能题目提取功能，可以从包含题目和答案的文本内容中自动识别和提取题目信息，包括题目类型、选项、答案等，然后自动录入到题库中。

## 技术实现

### 后端实现

1. **AI配置** (`AiConfig.java`)
   - 配置WebClient用于HTTP请求
   - 设置最大内存缓冲区为10MB

2. **DTO类**
   - `AiQuestionRequest`: AI题目提取请求参数
   - `GeminiRequest/GeminiResponse`: Gemini API请求响应格式
   - `AiExtractedQuestion`: AI提取的题目数据结构

3. **服务层** (`AiQuestionService`)
   - `extractAndAddQuestions()`: 提取题目并直接添加到题库
   - `extractQuestions()`: 仅提取题目预览

4. **控制器** (`AiQuestionController`)
   - `/api/ai-question/extract-and-add`: 提取并添加题目
   - `/api/ai-question/extract-preview`: 预览提取的题目

### 前端实现

1. **API接口** (`aiQuestion.js`)
   - 封装AI题目提取相关的HTTP请求

2. **页面组件**
   - `AiQuestionGenerate.vue`: 独立的AI提取页面
   - `QuestionManage.vue`: 在题目管理页面集成AI提取功能

## 使用方法

### 在题目管理页面使用

1. 进入题目管理页面
2. 点击"AI提取题目"按钮
3. 填写以下信息：
   - **选择题库**: 选择要添加题目的题库
   - **题目内容**: 输入包含题目和答案的文本内容

4. 选择操作方式：
   - **预览提取结果**: 先预览提取的题目，确认后再添加
   - **直接提取并添加**: 直接提取题目并添加到题库

### 支持的输入格式示例

#### 单选题格式
```
1. 以下哪个是Java的关键字？
A. class
B. Class  
C. CLASS
D. clazz
答案：A
```

#### 多选题格式
```
2. 以下哪些是Java的基本数据类型？
A. int
B. String
C. boolean
D. char
答案：A、C、D
```

#### 判断题格式
```
3. Java是面向对象的编程语言。
答案：正确
```

#### 问答题格式
```
4. 请简述Java的特点。
答案：Java具有跨平台、面向对象、安全性高等特点。
```

#### 填空题格式
```
5. Java程序的入口方法是______。
答案：main方法
```

### 预览功能

- 预览界面会显示所有提取的题目
- 每道题目包含：题目标题、内容、选项、答案、解析
- 可以查看题目类型和难度标签
- 确认无误后点击"确认添加到题库"

## AI模型配置

当前使用的AI模型配置：
- **模型**: gemini-2.0-flash
- **API地址**: https://chataiapi.com/v1/chat/completions
- **API密钥**: sk-XroANN9PzwAQi0wEINqHgoXnUaTnSpafdpLmoVWEsZGAOOmi
- **温度**: 0.3（降低温度以提高提取准确性）
- **最大令牌数**: 4000
- **超时时间**: 10分钟
- **最大输入长度**: 20000字符

## 支持的题目类型

AI会自动识别以下题目类型：

1. **单选题** (type=1)
   - 只有一个正确答案的选择题
   - 自动提取选项和答案

2. **多选题** (type=2)
   - 有多个正确答案的选择题
   - 支持多个答案的识别

3. **判断题** (type=3)
   - 正确/错误类型的题目
   - 自动设置选项为["正确", "错误"]

4. **问答题** (type=4)
   - 开放性问题
   - 提取标准答案

5. **填空题** (type=5)
   - 需要填空的题目
   - 提取标准答案

## 智能识别特性

1. **自动题目类型识别**
   - 根据题目格式和选项自动判断题目类型
   - 无需手动指定题目类型

2. **选项自动提取**
   - 识别A、B、C、D等选项格式
   - 支持数字编号选项

3. **答案智能匹配**
   - 自动识别"答案："、"正确答案："等标识
   - 支持多种答案表示格式

4. **题目标题生成**
   - 如果没有明确标题，自动用题目内容前几个字作为标题
   - 保持题目的完整性

## 注意事项

1. **内容格式要求**
   - 输入内容至少20个字符
   - 最大支持20000个字符
   - 建议按照标准格式输入题目和答案
   - 题目和答案之间要有明确的分隔

2. **提取准确性**
   - 内容格式越规范，提取准确性越高
   - 建议在预览后确认题目内容的正确性

3. **批量处理**
   - 支持一次输入多道题目
   - AI会自动分离和识别每道题目

4. **超时处理**
   - AI处理超时时间设置为10分钟
   - 如果内容过多可能需要较长处理时间
   - 建议合理分批处理大量题目

5. **题目编辑**
   - 单选题：通过选择选项按钮设置正确答案
   - 多选题：通过复选框选择多个正确答案
   - 判断题：选择"正确"或"错误"
   - 问答题和填空题：直接输入答案文本

## 扩展功能

未来可以考虑的扩展功能：
- 支持更多题目格式
- 图片题目识别
- 批量文档导入
- 题目质量评估
- 重复题目检测

## 技术架构

```
前端 (Vue3 + Element Plus)
    ↓ HTTP请求
后端 (Spring Boot)
    ↓ AI API调用
Gemini AI服务
    ↓ 返回提取结果
数据库 (MySQL)
```

## 开发规范

- 严格遵循MVC架构
- Controller层不包含业务逻辑
- 使用LambdaQueryWrapper进行数据库查询
- 统一的Result返回格式
- 完整的异常处理机制 